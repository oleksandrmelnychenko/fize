@using System.Net;
@using System.Net.Mail;
@using FizeRegistration.Common
@*@inject FizeRegistration.Common.IMailService MailService*@
@inject NavigationManager UrlManager
@inject HttpClient HttpClient
@*@inject IMailService MailService*@

<div class="basicBox" style="margin-top:7%;">
    <div class="leftSideOfRegistration">
        <div style="margin-left:100px">
            <div class="headwords" style=" margin-top: 80px; font-size: 27pt;">Fize Agency Tool</div>
            <div style="color: white; font-size: 14.5pt;  width: 350px; line-height: 17pt; margin-top: 14px;">Connect and viev your customer`s current insurance docs instantily</div>
        </div>
        <div class="squareIndent">
            <div class="WhiteBox"></div>
            <div style="margin-left: 15px;">
                <div class="headwords">Super quick sign up</div>
                <div class="smallText">Create a free Fize account in under a minute,with no credit card required</div>
            </div>
        </div>
        <div class="squareIndent">
            <div class="WhiteBox"></div>
            <div style="margin-left: 15px;">
                <div class="headwords">Enable modern customer experience</div>
                <div class="smallText">In seconds,Your clients can simply connect and share with you their insurance datalis</div>
            </div>
        </div>
        <div class="squareIndent">
            <div class="WhiteBox"></div>
            <div style="margin-left: 15px;">
                <div class="headwords">Reduce manual workload on your customers and close more with hyper-personalized service</div>
                <div class="smallText">Reduce your customer`s manual workload and introduce hyper-personalization</div>
            </div>
        </div>
    </div>
    <div class="rightSideOfRegistration">

        <div class="DivLocation">
            <img src="/ScreenShots/Fize.jpg" style="width: 20px;" /> fize
        </div>
        @if (SendMail)
        {
            <div style="margin-left: 75px;">
                <div class="RightHeadWordsBox" style="width:400px;">Confirm your Email</div>
                <div class="boxSuccessfulMail">
                    <div style="display: table-cell; vertical-align: middle;text-align: -webkit-center;">
                        <div class="CenterImg">
                            <img style="margin-top: 16px;" src="/ScreenShots/MailIcon.png" />
                        </div>
                        <div class="smallText" style="font-size: 10pt; color: black; font-weight: 600;  margin-top: 22px;">Successfully made your account. Check your email</div>
                    </div>
                </div>
            </div>
        }
        else
        {
            <div class="DivLocation">

                <div>
                    <div class="RightHeadWordsBox">Sign up with Fize</div>
                    <div class="RightBoxText" style=" margin-top: 20px;">Try Fize risk free,no credit card required</div>
                    <div>
                        <div class="smallText" style="color: black; font-size: 12pt; height: 11px;">Work email adress</div>
                        <label>
                            <input @bind="Email" class="InputMail" />
                        </label>
                        <div class="RightBoxText" style="  margin-top: 5px; ">Only work emails are allowed to register</div>
                        <button class="buttonSendEmail" @onclick="SendEmailPost">Start For Free</button>
                        <div class="RightBoxText" style=" width: 200px; text-align: -webkit-center; margin-left: 85px;">By clicking 'Start for free' you agree to our Terms and Privacy Policy</div>
                        <div style="display:flex; margin-top: 80px;">
                            <div class="TextHaveAccount">Have a account?</div>
                            <div class="TextSignIn">Sign In ></div>
                        </div>
                    </div>
                </div>
            </div>
        }


    </div>
</div>


@code {
    public string Email { get; set; }
    private bool SendMail;
    private async void SendEmailPost()
    {

        //bool correctEmail = MailService.IsValidEmail(Email);
        if (Email is not null)
        {
            SendMail = true;
            MailSettings mail = new MailSettings { ToEmail = Email };
            var biba = await HttpClient.PostAsJsonAsync<MailSettings>("Email", mail);
        }

    }

}
